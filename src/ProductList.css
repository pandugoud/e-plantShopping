import React from "react";
import { useDispatch, useSelector } from "react-redux";
import { addItem } from "../redux/CartSlice";
import "./App.css";

const plants = [
  // Aromatic Plants
  { name: "Basil", cost: "$5", category: "Aromatic", image: "/images/basil.jpg" },
  { name: "Mint", cost: "$4", category: "Aromatic", image: "/images/mint.jpg" },
  { name: "Lavender", cost: "$6", category: "Aromatic", image: "/images/lavender.jpg" },
  { name: "Rosemary", cost: "$7", category: "Aromatic", image: "/images/rosemary.jpg" },
  { name: "Thyme", cost: "$3", category: "Aromatic", image: "/images/thyme.jpg" },
  { name: "Oregano", cost: "$4", category: "Aromatic", image: "/images/oregano.jpg" },

  // Medicinal Plants
  { name: "Aloe Vera", cost: "$10", category: "Medicinal", image: "/images/aloe.jpg" },
  { name: "Tulsi", cost: "$8", category: "Medicinal", image: "/images/tulsi.jpg" },
  { name: "Neem", cost: "$12", category: "Medicinal", image: "/images/neem.jpg" },
  { name: "Chamomile", cost: "$9", category: "Medicinal", image: "/images/chamomile.jpg" },
  { name: "Ginseng", cost: "$15", category: "Medicinal", image: "/images/ginseng.jpg" },
  { name: "Echinacea", cost: "$13", category: "Medicinal", image: "/images/echinacea.jpg" },

  // Decorative Plants
  { name: "Fern", cost: "$8", category: "Decorative", image: "/images/fern.jpg" },
  { name: "Orchid", cost: "$20", category: "Decorative", image: "/images/orchid.jpg" },
  { name: "Peace Lily", cost: "$18", category: "Decorative", image: "/images/peacelily.jpg" },
  { name: "Snake Plant", cost: "$15", category: "Decorative", image: "/images/snakeplant.jpg" },
  { name: "Spider Plant", cost: "$12", category: "Decorative", image: "/images/spiderplant.jpg" },
  { name: "Cactus", cost: "$10", category: "Decorative", image: "/images/cactus.jpg" },
];

function ProductList() {
  const dispatch = useDispatch();
  const cartItems = useSelector((state) => state.cart.items);

  // Calculate total items in cart
  const totalQuantity = cartItems.reduce((total, item) => total + item.quantity, 0);

  const handleAdd = (plant) => {
    dispatch(addItem(plant));
  };

  const categories = ["Aromatic", "Medicinal", "Decorative"];

  return (
    <div>
      <nav style={{ backgroundColor: "green", padding: "10px", color: "white" }}>
        <span>Paradise Nursery</span> | 
        <span style={{ marginLeft: "10px" }}>Plants</span> | 
        <span style={{ marginLeft: "10px" }}>Cart ({totalQuantity})</span>
      </nav>

      {categories.map((cat) => (
        <div key={cat}>
          <h2>{cat} Plants</h2>
          <div style={{ display: "flex", flexWrap: "wrap" }}>
            {plants
              .filter((p) => p.category === cat)
              .map((plant) => {
                const inCart = cartItems.find((i) => i.name === plant.name);
                return (
                  <div
                    key={plant.name}
                    style={{
                      border: "1px solid gray",
                      borderRadius: "8px",
                      margin: "10px",
                      padding: "10px",
                      width: "150px",
                      textAlign: "center",
                    }}
                  >
                    <img src={plant.image} alt={plant.name} width={120} />
                    <h4>{plant.name}</h4>
                    <p>{plant.cost}</p>
                    <button onClick={() => handleAdd(plant)} disabled={!!inCart}>
                      {inCart ? "Added to Cart" : "Add to Cart"}
                    </button>
                  </div>
                );
              })}
          </div>
        </div>
      ))}
    </div>
  );
}

export default ProductList;